openapi: 3.0.0
info:
  version: 1.0.0
  title: BAEUJA API DOCS for DEV
  description: '`BAEUJA` TEAM의 API 문서입니다'
  license:
    name: MIT
servers:
  - url: 'http://localhost:4000/'
  - url: 'https://api.peach.io/'
tags:
  - name: user
    description: user APIs
  - name: learning
    description: learning APIs
paths:
  /learning/contents:
    get:
      tags:
        - learning
      summary: content 리스트 요청
      security:
        - bearerAuth: []
      responses:
        200-304:
          description: 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Contents'
        400-BadRequest:
          description: 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401-UnauthorizedError:
          description: Access token이 없거나 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404-NotFound:
          description: 서버는 요청받은 리소스를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/learning/contents/{contentId}':
    get:
      tags:
        - learning
      summary: 특정 content 추가 정보(더 보기) 요청
      security:
        - bearerAuth: []
      parameters:
        - name: contentId
          in: path
          description: 추가 정보(더 보기) 요청할 contentId
          required: true
          schema:
            type: number
      responses:
        200-304:
          description: 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Content'
        400-BadRequest:
          description: 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401-UnauthorizedError:
          description: Access token이 없거나 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404-NotFound:
          description: 서버는 요청받은 리소스를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/learning/contents/{contentId}/units':
    get:
      tags:
        - learning
      summary: content 터치 시 learning unit 리스트 요청
      security:
        - bearerAuth: []
      parameters:
        - name: contentId
          in: path
          description: 터치한 contentId
          required: true
          schema:
            type: number
      responses:
        200-304-K-POP:
          description: 요청 성공 (K-POPcontent 터치 시)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnitsInKPOP'
        200-304-Others:
          description: 요청 성공 (K-DRAMA or K-MOVIE content 터치 시)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnitsInOthers'
        400-BadRequest:
          description: 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401-UnauthorizedError:
          description: Access token이 없거나 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404-NotFound:
          description: 서버는 요청받은 리소스를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/learning/contents/{contentId}/units/{unitIndex}/sentences':
    get:
      tags:
        - learning
      summary: learning unit 터치 시 학습 문장 리스트 요청(메인 학습 화면)
      security:
        - bearerAuth: []
      parameters:
        - name: contentId
          in: path
          description: 터치한 content Id
          required: true
          schema:
            type: number
        - name: unitIndex
          in: path
          description: 터치한 learning unit index
          required: true
          schema:
            type: number
      responses:
        200-304:
          description: 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sentences'
        400-BadRequest:
          description: 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401-UnauthorizedError:
          description: Access token이 없거나 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404-NotFound:
          description: 서버는 요청받은 리소스를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/learning/word/{wordId}':
    get:
      tags:
        - learning
      summary: 터치한 단어 요청 (단어 학습 화면)
      security:
        - bearerAuth: []
      parameters:
        - name: wordId
          in: path
          description: 터치한 word id
          required: true
          schema:
            type: number
      responses:
        200-304:
          description: 요청 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Word'
        400-BadRequest:
          description: 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401-UnauthorizedError:
          description: Access token이 없거나 유효하지 않음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404-NotFound:
          description: 서버는 요청받은 리소스를 찾을 수 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /users:
    post:
      tags:
        - api/user
      summary: Create User
components:
  parameters:
    - in: header
      name: Authorization
      schema:
        type: string
      required: true
  schemas:
    Contents:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        contents:
          type: array
          items:
            type: object
            properties:
              contentId:
                type: number
              classification:
                type: string
              title:
                type: string
              artist:
                type: string
              director:
                type: string
              thumbnailUri:
                type: string
              progressRate:
                type: number
    Content:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        content:
          type: object
          properties:
            contentId:
              type: number
            title:
              type: string
            artist:
              type: string
            director:
              type: string
            description:
              type: string
            thumbnailUri:
              type: string
    UnitsInKPOP:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        units:
          type: array
          items:
            type: object
            properties:
              unitIndex:
                type: number
              contentId:
                type: number
              thumbnailUri:
                type: string
              sentencesCounts:
                type: number
                description: 학습할 수 있는 문장 개수
              wordsCounts:
                type: number
                description: 학습할 수 있는 단어 개수
              latestLearningAt:
                type: string
                description: 최근 학습 시간(안했으면 null)
              representativeWords:
                type: array
                items:
                  type: object
                  properties:
                    wordId:
                      type: number
                    originalKoreanText:
                      type: string
    UnitsInOthers:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        units:
          type: array
          items:
            type: object
            properties:
              unitIndex:
                type: number
              contentId:
                type: number
              thumbnailUri:
                type: string
              representativeSentence:
                type: object
                properties:
                  sentenceId:
                    type: number
                  koreanText:
                    type: string
                  translatedText:
                    type: string
                  isConversation:
                    type: boolean
                  isFamousLine:
                    type: boolean
                  isBookmark:
                    type: boolean
                  learningRate:
                    type: number
                  latestLearningAt:
                    type: string
                    description: 최근 학습 시간(안했으면 null)
    Sentences:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        unit:
          type: object
          description: 유튜브 영상을 위한 unit 객체
          properties:
            unitIndex:
              type: number
              example: 1
            contentId:
              type: number
              example: 5
            youtubeUrl:
              type: string
              example: 'https://www.youtube.com/watch?v=9bZkp7q19f0'
            startTime:
              type: string
              example: '0:18'
            endTime:
              type: string
              example: '0:32'
        sentences:
          type: array
          items:
            type: object
            properties:
              sentenceId:
                type: number
                example: 1
              koreanText:
                type: string
                example: 낮에는 따사로운 인간적인 여자
              translatedText:
                type: string
                example: 'A warm, humane woman during the day.'
              perfectVoiceUri:
                type: string
                example: 'https://cdn.k-peach.io/perfect-voice/test.wav'
              startTime:
                type: string
                example: '0:18'
              endTime:
                type: string
                example: '0:21'
              isBookmark:
                type: boolean
                example: false
              words:
                type: array
                items:
                  type: object
                  wordId:
                    type: number
                    example: 1
                  prevKoreanText:
                    type: string
                    example: 낮
                  prevTranslatedText:
                    type: string
                    example: day
                  originalKoreanText:
                    type: string
                    example: 낮
                  originalTranslatedText:
                    type: string
                    example: day
    Word:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        words:
          type: array
          items:
            type: object
            properties:
              wordId:
                type: number
              sentenceId:
                type: number
              prevKoreanText:
                type: string
              prevTranslatedText:
                type: string
              originalKoreanText:
                type: string
              originalTranslatedText:
                type: string
              perfectVoiceUri:
                type: string
              importance:
                type: string
    User:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
        users:
          type: array
          items:
            type: object
            properties:
              userId:
                type: number
                description: primary key
              email:
                type: string
                description: 이메일
              nickname:
                type: string
                description: 닉네임
              country:
                type: string
                description: 사용자 국가
              usageTime:
                type: string
                description: 앱 사용 시간
    Error:
      type: object
      properties:
        success:
          type: boolean
          description: 요청 성공/실패
          example: false
        errorMessage:
          type: string
  securitySchemes:
    oAuth2AuthCode:
      type: oauth2
      description: 'For more information, see https://api.slack.com/docs/oauth'
      flows:
        authorizationCode:
          authorizationUrl: 'https://slack.com/oauth/authorize'
          tokenUrl: 'https://slack.com/api/oauth.access'
          scopes:
            'users:read': Read user information
            'users:write': Modify user information
            'im:read': Read messages
            'im:write': Write messages
            'im:history': Access the message archive
            'search:read': 'Search messages, files, and so on'
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: '코드에서는 __HTTP Authorization header__를 다음과 같이 추가해야 함 <br> `Authorization: Bearer <token>`'
